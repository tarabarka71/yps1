# Project_template


# Задание 1. Анализ и планирование

### 1. Описание функциональности монолитного приложения

Приложение позволяет:
 - получать список датчиков, добавлять и удалять датчики
 - обновлять данные датчиков
 - получать значения датчиков

**Управление отоплением:**

Пользователи могут:
  - удалённо включать/выключать отопление в своих домах. Так в задании. Непонятно как это реализовано. Существующий API позволяет устанавливать значиние датчика, вероятно, имеется в виду что есть разные виды "датчиков" - отдельно для мониторинга и управления (не датчик, а контроллер).

**Мониторинг температуры:**

Пользователи могут:
  - просматривать текущую температуру в своих домах через веб-интерфейс

### 2. Анализ архитектуры монолитного приложения

 - Язык программирования: Go
 - База данных: PostgreSQL
 - Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
 - Взаимодействие: Синхронное, запросы обрабатываются последовательно.
 - Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
 - Развертывание: Требует остановки всего приложения.

### 3. Определение доменов и границы контекстов

 - Домен: работа с устройствами
   - Поддомен: реестр устройств
     - Контекст: добавление/удаление устройтв
   - Поддомен: управление устройствами
     - Контекст: включение/отключение/задание параметров устройств

 - Домен: мониторинг устройств 
   - Поддомен: получение данных с устройств

 - Домен: управление пользователями
   - Поддомен: управление учетными записями
	   - Контекст: добавление/удаление пользователей

 - Домен: контроль доступа
   	- Поддомен: управление доступом к устройствам
   		- Контекст: разграничение прав доступа пользователей к устройствам
	- Поддомен: контроль доступа к прогрмме управления устройствами 
   		- Контекст: аутентификая пользователей

 - Домен: биллинг
   - Поддомен: управеление тарифами
    	- Контекст: тарифы 
  	- Поддомен: обработка платежей 
   		- Контекст: рассчет платежей
   		- Контекст: интеграция с платежными системами

### **4. Проблемы монолитного решения**

 - Сложно масштабировать
 - Любое изменение влечет переустановку приложения
 - Нет асинхронности и надёжной интеграции с внешними устройствами/партнёрами.
 - Нет разграничения данных, тяжело развивать новые устройства/модули.


### 5. Визуализация контекста системы — диаграмма С4

[Монолит](diagram/monolith.puml)
[Монолит To Be](diagram/monolith_new.puml)

# Задание 2. Проектирование микросервисной архитектуры

Микросервисы:
	- Реестр устройств	(device-service)
	- Управление устройствами	(control-service)
	- Хранение/аналитика	(telemetry-service)
	- Управление аккаунтами	(user-service)
	- Аутентификация/авторизация	(auth-service)
	- Доступ к устройствам	(access-service)
	- Тарифы/платежи	(billing-service)

**Диаграмма контейнеров (Containers)**

[Диаграмма контейнеров](diagram/Containers_C4.puml)

**Диаграмма компонентов (Components)**

[Управление устройствами](diagram/Component_control_sevice_C4.puml)
[Реестр устройств](diagram/Component_device_sevice_C4.puml)
[Хранение/аналитика](diagram/Component_telemetry_sevice_C4.puml)
[Управление пользователями](diagram/Component_user_sevice_C4.puml)
[Аутентификация/авторизация](diagram/Component_auth_sevice_C4.puml)
[Доступ к устройствам](diagram/Component_access_sevice_C4.puml)
[Тарифы/платежи](diagram/Component_billing_sevice_C4.puml)

**Диаграмма кода (Code)**

[Управление устройствами](diagram/Component_control_sevice_code.puml)

# Задание 3. Разработка ER-диаграммы

[ER-диаграмма](diagram/er.puml)

# Задание 4. Создание и документирование API

### 1. Тип API

Для управления пользователями, устройствами и биллингом - REST API (синхронный обмен).
Для передачи данных телеметрии и уведомлений — AsyncAPI (асинхронный обмен через очередь сообщений).

### 2. Документация API
[Хранение/аналитика](api/telemetry-service.yaml)
[Управление пользователями (с примерами)](api/user-service.yaml)
[Аутентификация/авторизация](api/auth-service.yaml)
[Доступ к устройствам](api/access-service.yaml)
[Тарифы/платежи](api/billing-service.yaml)
[Реестр устройств (с примерами)](api/device-service.yaml)
[Управление устройствами](api/control-service.yaml)

# Задание 5. Работа с docker и docker-compose

Приложение готово (apps\temperature-api.py )


